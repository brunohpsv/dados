<!DOCTYPE html>
<html>
<head>
    <title>Dados Firestore</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <style>
        body { font-family: Arial; padding: 20px; }
        pre { background: #f0f0f0; padding: 10px; border-radius: 5px; }
        .error { color: red; font-weight: bold; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>Dados do Firestore</h1>
    <div id="debug"></div>
    <pre id="data">Carregando...</pre>

    <script>
        // 1. DEBUG INICIAL
        const debug = document.getElementById('debug');
        const dataElement = document.getElementById('data');
        
        debug.innerHTML += '<p class="success">1. Página carregada</p>';
        
        // 2. CONFIGURAÇÃO DO FIREBASE
        try {
            debug.innerHTML += '<p class="success">2. Firebase configurado</p>';
            
            firebase.initializeApp({
                apiKey: "AIzaSyClmS9QnPH_HpLzN8mGW2s2PjfH4HXEAt8",
                projectId: "horariosite-669d1"
            });
            
            const db = firebase.firestore();
            
            // 3. TESTE DE CONEXÃO
            debug.innerHTML += '<p>3. Testando conexão com Firestore...</p>';
            
            // Tenta acessar uma coleção específica que você sabe que existe
            db.collection("horarios").get().then(snapshot => {
                if (snapshot.empty) {
                    debug.innerHTML += '<p class="error">3.1. Coleção encontrada mas vazia</p>';
                } else {
                    debug.innerHTML += `<p class="success">3.1. Sucesso! ${snapshot.size} documentos encontrados</p>`;
                    
                    // Mostra os dados brutos para debug
                    const docs = [];
                    snapshot.forEach(doc => {
                        docs.push({ id: doc.id, data: doc.data() });
                    });
                    dataElement.textContent = JSON.stringify(docs, null, 2);
                }
            }).catch(error => {
                debug.innerHTML += `<p class="error">3.1. ERRO: ${error.message}</p>`;
                console.error("Erro detalhado:", error);
            });
            
        } catch (error) {
            debug.innerHTML += `<p class="error">2.1 ERRO: ${error.message}</p>`;
        }
    </script>
</body>
</html>
